# Implementation Tasks: Web Automation Checker

**Feature**: Web Automation Checker | **Branch**: `001-web-automation-checker` | **Date**: 2025-11-27

**Note**: This file is generated by `/speckit.tasks` command. See `.specify/templates/commands/tasks.md` for the workflow.

## Task Format

Each task follows this format:
```
- [ ] T### [P?] [Story?] Task description (exact file path: path/to/file)
```

**Legend**:
- `T###`: Task ID (e.g., T001, T002)
- `[P?]`: Priority level (P1 = MVP, P2 = enhancement, P3 = future)
- `[Story?]`: User story reference ([US1], [US2], [US3]) or [Foundation] for shared infrastructure
- File path: Exact location where code should be written

## Phase 1: Project Setup & Infrastructure

### Monorepo Configuration

- [X] T001 [P1] [Foundation] Initialize root package.json for monorepo workspace (file: package.json)
  - Configure npm workspaces with "backend" and "frontend" directories
  - Add root scripts: `"dev"`, `"build"`, `"test"`
  - Set Node.js engines: `">=20.0.0"`

- [X] T002 [P1] [Foundation] Create backend package.json with core dependencies (file: backend/package.json)
  - Add express@^4.18.0, typescript@^5.3.0, playwright@^1.40.0
  - Add lighthouse@^11.0.0, zod@^3.22.0, pg@^8.11.0
  - Add dev dependencies: jest@^29.7.0, supertest@^6.3.0, @types/node@^20.0.0

- [X] T003 [P1] [Foundation] Create frontend package.json with React dependencies (file: frontend/package.json)
  - Add react@^18.2.0, react-dom@^18.2.0, typescript@^5.3.0
  - Add @tanstack/react-query@^5.0.0, recharts@^2.10.0, tailwindcss@^3.4.0
  - Add vite@^5.0.0, vitest@^1.0.0, @testing-library/react@^14.0.0

- [X] T004 [P1] [Foundation] Configure TypeScript for backend (file: backend/tsconfig.json)
  - Set target: ES2022, module: NodeNext, moduleResolution: NodeNext
  - Enable strict mode, esModuleInterop, resolveJsonModule
  - Set outDir: "./dist", rootDir: "./src"

- [X] T005 [P1] [Foundation] Configure TypeScript for frontend (file: frontend/tsconfig.json)
  - Set target: ES2022, lib: ["ES2022", "DOM", "DOM.Iterable"]
  - Enable jsx: "react-jsx", strict mode
  - Configure path aliases: `"@/*": ["./src/*"]`

- [X] T006 [P1] [Foundation] Configure Vite for frontend (file: frontend/vite.config.ts)
  - Add React plugin, configure port 5173
  - Set proxy for API calls to http://localhost:3000
  - Configure build.outDir: "../dist/frontend"

- [X] T007 [P1] [Foundation] Configure Tailwind CSS (files: frontend/tailwind.config.js, frontend/src/index.css)
  - Set content paths for component scanning
  - Configure theme colors matching design system
  - Add base styles and reset

## Phase 2: Foundational Backend Services

### Database Layer

- [ ] T008 [P1] [Foundation] Create PostgreSQL connection module (file: backend/src/database/connection.ts)
  - Initialize pg Pool with connection string from env
  - Export typed query function with error handling
  - Add connection health check function

- [ ] T009 [P1] [Foundation] Create test_requests table migration (file: backend/src/database/migrations/001_create_test_requests.sql)
  - Define schema from data-model.md:168-177
  - Add indexes on (url, created_at) and status columns
  - Add CHECK constraint for valid status enum

- [ ] T010 [P1] [Foundation] Create test_reports table migration (file: backend/src/database/migrations/002_create_test_reports.sql)
  - Define schema from data-model.md:179-191
  - Add foreign key to test_requests(id) with ON DELETE CASCADE
  - Add CHECK constraint for score range 0-100

- [ ] T011 [P1] [Foundation] Create ui_test_results table migration (file: backend/src/database/migrations/003_create_ui_test_results.sql)
  - Define schema from data-model.md:193-204
  - Add foreign key to test_reports(id) with ON DELETE CASCADE
  - Add JSONB column for diagnostics with GIN index

- [ ] T012 [P1] [Foundation] Create performance_results table migration (file: backend/src/database/migrations/004_create_performance_results.sql)
  - Define schema from data-model.md:206-216
  - Add foreign key to test_reports(id) with ON DELETE CASCADE
  - Add JSONB column for details with GIN index

- [ ] T013 [P1] [Foundation] Create migration runner script (file: backend/src/database/migrate.ts)
  - Read all .sql files from migrations/ directory in order
  - Execute each migration within transaction
  - Track applied migrations in schema_migrations table

### Core Models & Repositories

- [ ] T014 [P1] [Foundation] Define TypeScript entity interfaces (file: backend/src/models/entities.ts)
  - Copy interfaces from data-model.md:24-119
  - Export TestRequest, TestReport, UITestResult, PerformanceResult, TestHistory types
  - Define enums: TestRequestStatus, UITestType, TestResultStatus, PerformanceMetric

- [ ] T015 [P1] [Foundation] Create TestRequestRepository (file: backend/src/models/repositories/TestRequestRepository.ts)
  - Implement create(url, config): Promise<TestRequest>
  - Implement findById(id): Promise<TestRequest | null>
  - Implement updateStatus(id, status): Promise<void>

- [ ] T016 [P1] [Foundation] Create TestReportRepository (file: backend/src/models/repositories/TestReportRepository.ts)
  - Implement create(testRequestId, reportData): Promise<TestReport>
  - Implement findById(id): Promise<TestReport | null>
  - Implement findByUrl(url, limit, offset): Promise<TestReport[]> (for P3)

- [ ] T017 [P1] [Foundation] Create UITestResultRepository (file: backend/src/models/repositories/UITestResultRepository.ts)
  - Implement batchCreate(testReportId, results[]): Promise<UITestResult[]>
  - Implement findByReportId(reportId): Promise<UITestResult[]>

- [ ] T018 [P1] [Foundation] Create PerformanceResultRepository (file: backend/src/models/repositories/PerformanceResultRepository.ts)
  - Implement batchCreate(testReportId, results[]): Promise<PerformanceResult[]>
  - Implement findByReportId(reportId): Promise<PerformanceResult[]>

### Browser Automation Infrastructure

- [ ] T019 [P1] [Foundation] Create Playwright browser pool (file: backend/src/automation/BrowserPool.ts)
  - Initialize 5 chromium browser instances on startup
  - Implement acquire(): Promise<Browser> with queue if all busy
  - Implement release(browser): void to return to pool
  - Add graceful shutdown to close all browsers

- [ ] T020 [P1] [Foundation] Create screenshot service (file: backend/src/automation/ScreenshotService.ts)
  - Implement captureElement(page, selector): Promise<string> returning base64 WebP
  - Compress to 80% quality per research.md:260-268
  - Store in /tmp with unique filename, return file path

### API Middleware & Validation

- [ ] T021 [P1] [Foundation] Create Express app setup (file: backend/src/api/app.ts)
  - Initialize Express with JSON body parser
  - Configure CORS for frontend origin (http://localhost:5173)
  - Add global error handler middleware
  - Export configured app instance

- [ ] T022 [P1] [Foundation] Create URL validation middleware (file: backend/src/api/middleware/validateUrl.ts)
  - Use Zod schema to validate URL format (http/https only)
  - Check max length 2048 characters per contracts/api.yaml:308
  - Reject file://, ftp://, localhost URLs per research.md:282-296
  - Return 400 with error details on validation failure

- [ ] T023 [P1] [Foundation] Create rate limiting middleware (file: backend/src/api/middleware/rateLimit.ts)
  - Implement 10 requests/minute per IP per research.md:298-305
  - Use in-memory store with sliding window algorithm
  - Return 429 with retryAfter header on limit exceeded

## Phase 3: User Story 1 - Basic URL Testing (P1)

**User Story**: [quickstart.md:82-122](quickstart.md) - Test a webpage and get instant report with UI and performance results

### UI Testing Service

- [ ] T024 [P1] [US1] Create UI testing service (file: backend/src/automation/UITestingService.ts)
  - Implement testLinks(page): Promise<UITestResult[]> - find all <a> tags, check href validity
  - Implement testForms(page): Promise<UITestResult[]> - find forms, verify submit button exists
  - Implement testButtons(page): Promise<UITestResult[]> - find buttons, check click handlers
  - Implement testImages(page): Promise<UITestResult[]> - find images, verify src loads successfully

- [ ] T025 [P1] [US1] Implement link testing logic (file: backend/src/automation/UITestingService.ts:testLinks)
  - Use page.locator('a[href]') to find all links
  - Check href attribute is not empty or '#'
  - Mark as fail if href is 404 (optional HEAD request)
  - Return UITestResult array with testType: 'link'

- [ ] T026 [P1] [US1] Implement form testing logic (file: backend/src/automation/UITestingService.ts:testForms)
  - Use page.locator('form') to find forms
  - Check for submit button or input[type="submit"]
  - Mark as fail if form has no submit mechanism
  - Return UITestResult array with testType: 'form'

- [ ] T027 [P1] [US1] Implement button testing logic (file: backend/src/automation/UITestingService.ts:testButtons)
  - Use page.locator('button, input[type="button"]')
  - Check if button is visible and enabled
  - Mark as warning if button is disabled
  - Return UITestResult array with testType: 'button'

- [ ] T028 [P1] [US1] Implement image testing logic (file: backend/src/automation/UITestingService.ts:testImages)
  - Use page.locator('img[src]') to find images
  - Check naturalWidth > 0 to verify loaded
  - Mark as fail if image returns 404 or broken
  - Return UITestResult array with testType: 'image'

### Performance Analysis Service

- [ ] T029 [P1] [US1] Create performance analysis service (file: backend/src/performance/PerformanceAnalysisService.ts)
  - Implement runLighthouse(url): Promise<LighthouseResult>
  - Configure Lighthouse with mobile emulation off (desktop only per research.md:319)
  - Set timeout to 30 seconds per spec SC-001

- [ ] T030 [P1] [US1] Extract performance metrics from Lighthouse (file: backend/src/performance/PerformanceAnalysisService.ts:extractMetrics)
  - Extract loadTime from audits['speed-index'].numericValue
  - Extract resourceSize from audits['total-byte-weight'].numericValue
  - Extract responseTime from audits['server-response-time'].numericValue
  - Extract renderTime from audits['first-contentful-paint'].numericValue
  - Return PerformanceResult array with measured values

- [ ] T031 [P1] [US1] Apply performance thresholds (file: backend/src/performance/thresholds.ts)
  - Define PERFORMANCE_THRESHOLDS from quickstart.md:341-347
  - loadTime: 3000ms, resourceSize: 2MB, responseTime: 500ms, renderTime: 2000ms
  - Export as constant for use in analysis service

- [ ] T032 [P1] [US1] Calculate performance status (file: backend/src/performance/PerformanceAnalysisService.ts:calculateStatus)
  - Compare measuredValue against threshold
  - Return 'pass' if within threshold
  - Return 'warning' if 10-20% over threshold
  - Return 'fail' if >20% over threshold

### Test Execution Orchestration

- [ ] T033 [P1] [US1] Create test execution service (file: backend/src/services/TestExecutionService.ts)
  - Implement executeTest(testRequestId, url, config): Promise<TestReport>
  - Orchestrate: acquire browser → navigate → run UI tests → run Lighthouse → release browser
  - Handle errors and update test_requests.status accordingly
  - Calculate overall score from passed/failed/warning counts

- [ ] T034 [P1] [US1] Implement test execution workflow (file: backend/src/services/TestExecutionService.ts:executeTest)
  - Update test_requests.status to 'running'
  - Acquire browser from pool with timeout
  - Navigate to URL with waitUntil: 'networkidle' per research.md:78
  - Call UITestingService for all UI checks
  - Call PerformanceAnalysisService for metrics
  - Save TestReport and results to database
  - Update test_requests.status to 'completed' or 'failed'

- [ ] T035 [P1] [US1] Calculate overall health score (file: backend/src/services/TestExecutionService.ts:calculateScore)
  - Formula: (passedChecks / totalChecks) * 100
  - Weight UI tests and performance equally
  - Return integer 0-100 per data-model.md:50

### API Endpoints for P1

- [ ] T036 [P1] [US1] Create POST /api/v1/tests endpoint (file: backend/src/api/routes/tests.ts)
  - Validate request body with Zod per contracts/api.yaml:44-62
  - Create TestRequest record with status 'pending'
  - Queue test execution (async, don't await)
  - Return 201 with TestRequest object per contracts/api.yaml:63-76

- [ ] T037 [P1] [US1] Create GET /api/v1/tests/:testId endpoint (file: backend/src/api/routes/tests.ts)
  - Validate UUID format with Zod
  - Query TestRequestRepository.findById(testId)
  - Return 200 with TestRequest object or 404 if not found per contracts/api.yaml:100-130

- [ ] T038 [P1] [US1] Create GET /api/v1/reports/:reportId endpoint (file: backend/src/api/routes/reports.ts)
  - Validate UUID format with Zod
  - Query TestReportRepository.findById(reportId)
  - Join with UITestResult and PerformanceResult arrays
  - Return 200 with full TestReport object per contracts/api.yaml:131-162

- [ ] T039 [P1] [US1] Create API server entry point (file: backend/src/index.ts)
  - Import app from api/app.ts
  - Mount routes: /api/v1/tests, /api/v1/reports
  - Start server on port 3000
  - Add graceful shutdown for browser pool cleanup

### Frontend Components for P1

- [ ] T040 [P1] [US1] Create API client service (file: frontend/src/services/api.ts)
  - Define createTest(url): Promise<TestRequest> using fetch
  - Define getTestStatus(testId): Promise<TestRequest>
  - Define getReport(reportId): Promise<TestReport>
  - Set base URL to http://localhost:3000/api/v1

- [ ] T041 [P1] [US1] Create TanStack Query hooks (file: frontend/src/services/queries.ts)
  - Define useCreateTest() mutation hook
  - Define useTestStatus(testId) query with polling every 2s
  - Define useReport(reportId) query with caching
  - Export all hooks for component use

- [ ] T042 [P1] [US1] Create TestInput component (file: frontend/src/components/TestInput/TestInput.tsx)
  - Render input field for URL with validation
  - Add "Check" button triggering useCreateTest mutation
  - Show loading spinner during submission
  - Navigate to report page on success with testId

- [ ] T043 [P1] [US1] Create TestReport component (file: frontend/src/components/TestReport/TestReport.tsx)
  - Accept reportId prop from URL params
  - Fetch report with useReport(reportId) hook
  - Display overall score (0-100) prominently per quickstart.md:101
  - Render UITestResults and PerformanceResults sections

- [ ] T044 [P1] [US1] Create UITestResults component (file: frontend/src/components/UITestResults/UITestResults.tsx)
  - Accept uiTestResults[] prop
  - Group results by testType (link, form, button, image)
  - Display pass/fail/warning status with ✅/❌/⚠️ icons per quickstart.md:111-114
  - Show summary: "X items tested, Y passed, Z failed"

- [ ] T045 [P1] [US1] Create PerformanceResults component (file: frontend/src/components/PerformanceResults/PerformanceResults.tsx)
  - Accept performanceResults[] prop
  - Display each metric with name, value, unit, threshold
  - Color-code: green (pass), yellow (warning), red (fail)
  - Show comparison: "2.1s (threshold: 3s)" per quickstart.md:117-120

- [ ] T046 [P1] [US1] Create Home page (file: frontend/src/pages/Home.tsx)
  - Render TestInput component
  - Add introductory text from quickstart.md:9-16
  - Show example URLs for testing
  - Link to quickstart guide

- [ ] T047 [P1] [US1] Create Report page (file: frontend/src/pages/Report.tsx)
  - Extract reportId from URL params
  - Poll test status with useTestStatus until completed
  - Show progress indicator during test execution per quickstart.md:96-98
  - Render TestReport component when completed

- [ ] T048 [P1] [US1] Configure React Router (file: frontend/src/App.tsx)
  - Define route "/" → Home page
  - Define route "/reports/:reportId" → Report page
  - Wrap with TanStack Query provider
  - Add error boundary for API failures

## Phase 4: User Story 2 - Detailed Problem Analysis (P2)

**User Story**: [quickstart.md:125-180](quickstart.md) - Click failed tests to see diagnostic details, screenshots, and fix recommendations

### Enhanced Screenshot & Diagnostics

- [ ] T049 [P2] [US2] Enhance screenshot service for failed elements (file: backend/src/automation/ScreenshotService.ts:captureWithHighlight)
  - Accept page, selector, errorType parameters
  - Draw red border around failed element using page.evaluate()
  - Capture full-page screenshot with highlighted area
  - Compress to WebP and return file path

- [ ] T050 [P2] [US2] Store screenshots in static file directory (file: backend/src/api/middleware/staticFiles.ts)
  - Configure Express static middleware for /screenshots route
  - Serve files from /tmp/screenshots directory
  - Add cleanup job to delete screenshots older than 7 days

- [ ] T051 [P2] [US2] Update UI testing service to capture screenshots on failure (file: backend/src/automation/UITestingService.ts)
  - Call ScreenshotService.captureWithHighlight() for each failed test
  - Store screenshot URL in UITestResult.screenshotUrl
  - Include element selector in UITestResult.diagnostics JSONB

### Recommendation Engine

- [ ] T052 [P2] [US2] Create recommendation service (file: backend/src/services/RecommendationService.ts)
  - Implement generateUIRecommendation(testType, errorMessage): string
  - Define recommendation templates per quickstart.md:159-179
  - Return actionable fix suggestions based on failure type

- [ ] T053 [P2] [US2] Add link failure recommendations (file: backend/src/services/RecommendationService.ts:linkRecommendations)
  - If 404 error: "Update href to valid page or remove link"
  - If empty href: "Add valid URL to href attribute"
  - If external broken link: "Check if external site is down or URL changed"

- [ ] T054 [P2] [US2] Add performance recommendations (file: backend/src/services/RecommendationService.ts:performanceRecommendations)
  - If resourceSize exceeds threshold: "Compress images using WebP format" per quickstart.md:176
  - If loadTime exceeds threshold: "Enable gzip compression" and "Lazy-load below-fold content"
  - If responseTime exceeds threshold: "Optimize server response time or use CDN"

- [ ] T055 [P2] [US2] Update test execution to generate recommendations (file: backend/src/services/TestExecutionService.ts:executeTest)
  - Call RecommendationService for each failed UI test
  - Store recommendation in UITestResult.recommendation
  - Call RecommendationService for each failed performance metric
  - Store recommendation in PerformanceResult.recommendation

### Frontend Detail Panel

- [ ] T056 [P2] [US2] Create DetailPanel component (file: frontend/src/components/DetailPanel/DetailPanel.tsx)
  - Accept uiTestResult or performanceResult prop
  - Render as slide-in panel from right side
  - Display screenshot if available (UITestResult.screenshotUrl)
  - Show error message, element info, recommendation per quickstart.md:138-146

- [ ] T057 [P2] [US2] Add click handlers to UITestResults items (file: frontend/src/components/UITestResults/UITestResults.tsx)
  - Make each test result item clickable
  - On click, open DetailPanel with selected result
  - Close panel on outside click or X button

- [ ] T058 [P2] [US2] Add click handlers to PerformanceResults items (file: frontend/src/components/PerformanceResults/PerformanceResults.tsx)
  - Make each metric clickable if status is warning or fail
  - On click, open DetailPanel with performance details per quickstart.md:164-179
  - Display largest resources breakdown if available

- [ ] T059 [P2] [US2] Add performance detail breakdown (file: backend/src/performance/PerformanceAnalysisService.ts:extractDetails)
  - Extract largest resources from Lighthouse audits['total-byte-weight'].details
  - Store top 5 resources with size and percentage in PerformanceResult.details JSONB
  - Format for display in DetailPanel

## Phase 5: User Story 3 - Test History & Comparison (P3)

**User Story**: [quickstart.md:183-259](quickstart.md) - View test history timeline, identify trends, compare two reports

### History Data Model

- [ ] T060 [P3] [US3] Create test history view aggregation (file: backend/src/models/repositories/TestHistoryRepository.ts)
  - Implement findByUrl(url, limit): Promise<TestHistory>
  - Aggregate all test reports for URL ordered by created_at DESC
  - Calculate trend: improving/stable/degrading from last 3 scores per contracts/api.yaml:556-558
  - Return TestHistory object with reports[] and metadata

- [ ] T061 [P3] [US3] Implement trend calculation (file: backend/src/models/repositories/TestHistoryRepository.ts:calculateTrend)
  - Compare last 3 test scores
  - Return 'improving' if average score increasing
  - Return 'degrading' if average score decreasing by >5 points per quickstart.md:201
  - Return 'stable' otherwise

### History API Endpoints

- [ ] T062 [P3] [US3] Create GET /api/v1/history/:url endpoint (file: backend/src/api/routes/history.ts)
  - Accept URL-encoded url parameter per contracts/api.yaml:220-226
  - Query TestHistoryRepository.findByUrl(url, limit)
  - Return 200 with TestHistory object per contracts/api.yaml:236-247
  - Return 404 if no tests found for URL

- [ ] T063 [P3] [US3] Create POST /api/v1/history/compare endpoint (file: backend/src/api/routes/history.ts)
  - Accept reportId1 and reportId2 in request body per contracts/api.yaml:259-276
  - Validate both reports exist and have same URL per contracts/api.yaml:284-286
  - Calculate scoreDelta, changedTests, performanceDelta per contracts/api.yaml:583-618
  - Return 200 with ReportComparison object

- [ ] T064 [P3] [US3] Implement report comparison logic (file: backend/src/services/ReportComparisonService.ts)
  - Compare uiTestResults status changes (pass→fail, fail→pass)
  - Calculate performance metric deltas (absolute and percentage)
  - Identify new failures since report1 per quickstart.md:245-246
  - Return structured comparison data

### Frontend History UI

- [ ] T065 [P3] [US3] Create history API hooks (file: frontend/src/services/queries.ts)
  - Define useHistory(url) query hook
  - Define useCompareReports(reportId1, reportId2) mutation hook
  - Export for component use

- [ ] T066 [P3] [US3] Create HistoryView component (file: frontend/src/components/HistoryView/HistoryView.tsx)
  - Accept url prop
  - Fetch history with useHistory(url) hook
  - Display timeline with all test runs per quickstart.md:204-221
  - Show trend indicator (improving/stable/degrading) prominently
  - Color-code timeline points: green (improving), red (degrading)

- [ ] T067 [P3] [US3] Create timeline chart with Recharts (file: frontend/src/components/HistoryView/TimelineChart.tsx)
  - Use Recharts LineChart for score over time
  - X-axis: test date/time, Y-axis: overall score 0-100
  - Add tooltip showing full test details on hover
  - Highlight trend changes with color transitions

- [ ] T068 [P3] [US3] Add "View History" button to report page (file: frontend/src/pages/Report.tsx)
  - Add button below TestReport component
  - On click, navigate to /history/:url (URL-encoded)
  - Show button only if URL has >1 test per quickstart.md:193

- [ ] T069 [P3] [US3] Create History page (file: frontend/src/pages/History.tsx)
  - Extract url from URL params (decode URL-encoded)
  - Render HistoryView component with url prop
  - Add comparison UI: checkboxes to select 2 reports
  - Show "Compare" button when exactly 2 selected per quickstart.md:227-230

- [ ] T070 [P3] [US3] Create ComparisonView component (file: frontend/src/components/ComparisonView/ComparisonView.tsx)
  - Accept reportId1 and reportId2 props
  - Fetch comparison with useCompareReports hook
  - Display score delta prominently per quickstart.md:242
  - Show changed tests with old→new status per quickstart.md:244-248
  - Show performance changes with percentages per quickstart.md:250-255

- [ ] T071 [P3] [US3] Update React Router for history routes (file: frontend/src/App.tsx)
  - Add route "/history/:url" → History page
  - Add route "/compare/:reportId1/:reportId2" → ComparisonView component
  - Update navigation links

## Phase 6: Polish & Documentation

### Environment Configuration

- [ ] T072 [P1] [Foundation] Create backend .env.example (file: backend/.env.example)
  - Define DATABASE_URL with example PostgreSQL connection string per quickstart.md:55
  - Define PORT=3000, NODE_ENV=development
  - Define SCREENSHOT_DIR=/tmp/screenshots

- [ ] T073 [P1] [Foundation] Create frontend .env.example (file: frontend/.env.example)
  - Define VITE_API_URL=http://localhost:3000 per quickstart.md:391
  - Document purpose of each variable

### Error Handling & Validation

- [ ] T074 [P1] [Foundation] Add input validation to frontend (file: frontend/src/components/TestInput/TestInput.tsx)
  - Validate URL format before submission (http/https only)
  - Show error message for invalid URLs per quickstart.md:409
  - Disable submit button if URL invalid

- [ ] T075 [P1] [Foundation] Add error boundaries to frontend (file: frontend/src/components/ErrorBoundary.tsx)
  - Catch React errors and display friendly message
  - Log errors to console for debugging
  - Provide "Try Again" button

- [ ] T076 [P1] [Foundation] Add API error handling to backend (file: backend/src/api/middleware/errorHandler.ts)
  - Catch all errors and format as Error schema per contracts/api.yaml:640-664
  - Return appropriate HTTP status codes (400, 404, 429, 500)
  - Log errors with stack traces for debugging

### Testing & Validation

- [ ] T077 [P1] [Foundation] Create backend health check endpoint (file: backend/src/api/routes/health.ts)
  - GET /health returns 200 with { status: 'ok' }
  - Check database connection
  - Check browser pool availability

### Documentation Updates

- [ ] T078 [P1] [Foundation] Update root README.md with quickstart link (file: README.md)
  - Add link to specs/001-web-automation-checker/quickstart.md
  - Add project overview and architecture diagram
  - Document npm scripts: dev, build, test, migrate

- [ ] T079 [P1] [Foundation] Create database setup script (file: backend/scripts/setup-db.sh)
  - Automate createdb web_automation_checker per quickstart.md:51
  - Run all migrations in order
  - Seed with example test data (optional)

---

## Dependencies & Ordering

### Critical Path (Must Complete in Order)

**Foundation → P1 → P2 → P3**

```
Phase 1 (T001-T007) → Phase 2 (T008-T023) → Phase 3 (T024-T048) → Phase 4 (T049-T059) → Phase 5 (T060-T071) → Phase 6 (T072-T079)
```

### User Story Dependencies

**User Story 1 (P1 MVP)**: Depends on Phase 1 + Phase 2 + Phase 3
```
Foundation (T001-T023)
  ↓
UI Testing (T024-T028) + Performance Analysis (T029-T032)
  ↓
Test Execution (T033-T035)
  ↓
API Endpoints (T036-T039) + Frontend (T040-T048)
```

**User Story 2 (P2)**: Depends on US1
```
US1 Complete (T001-T048)
  ↓
Enhanced Screenshots (T049-T051) + Recommendations (T052-T055)
  ↓
Frontend Detail Panel (T056-T059)
```

**User Story 3 (P3)**: Depends on US1 (can be parallel with US2)
```
US1 Complete (T001-T048)
  ↓
History Data Model (T060-T061)
  ↓
History API (T062-T064) + Frontend UI (T065-T071)
```

### Parallel Execution Opportunities

**Within Phase 2 (Foundation)**:
- T008-T013 (Database migrations) can run in parallel after T008 (connection module)
- T014-T018 (Repositories) can run in parallel after T013
- T019 (Browser pool) is independent, can run parallel with T008-T018
- T020 (Screenshot service) depends on T019 but parallel with T014-T018
- T021-T023 (API setup) can run parallel with T014-T020

**Within Phase 3 (User Story 1)**:
- T024-T028 (UI Testing) and T029-T032 (Performance) are fully parallel
- T040-T041 (API client) and T042-T048 (Components) can start as soon as T036-T039 (API endpoints) are defined

**Within Phase 5 (User Story 3)**:
- T065-T071 (Frontend history UI) can start as soon as T062 (History API endpoint) is defined, parallel with T063-T064 (Comparison logic)

---

## Task Statistics

**Total Tasks**: 79
- **Phase 1 (Setup)**: 7 tasks
- **Phase 2 (Foundation)**: 16 tasks
- **Phase 3 (User Story 1 - P1)**: 25 tasks
- **Phase 4 (User Story 2 - P2)**: 11 tasks
- **Phase 5 (User Story 3 - P3)**: 12 tasks
- **Phase 6 (Polish)**: 8 tasks

**By Priority**:
- **P1 (MVP)**: 56 tasks (includes all Foundation + US1 + Polish)
- **P2 (Enhancement)**: 11 tasks
- **P3 (Future)**: 12 tasks

**By User Story**:
- **[Foundation]**: 23 tasks (shared infrastructure)
- **[US1]**: 25 tasks (Basic URL Testing)
- **[US2]**: 11 tasks (Detailed Problem Analysis)
- **[US3]**: 12 tasks (Test History & Comparison)
- **Uncategorized (Polish)**: 8 tasks

**Estimated Timeline** (rough guideline, not a promise):
- **MVP (P1)**: 56 tasks → ~2-3 weeks (with parallelization)
- **P2**: 11 tasks → ~3-5 days
- **P3**: 12 tasks → ~3-5 days

---

## MVP Scope Recommendation

**Minimum Viable Product (P1)**: Tasks T001-T048 + T072-T079 = **64 tasks**

This includes:
1. ✅ Complete project setup and infrastructure
2. ✅ Database with all tables and repositories
3. ✅ Browser automation with Playwright
4. ✅ UI testing (links, forms, buttons, images)
5. ✅ Performance testing with Lighthouse
6. ✅ REST API endpoints for test creation and report retrieval
7. ✅ React frontend with URL input and report display
8. ✅ Configuration and documentation

**MVP delivers User Story 1 completely**: Users can input URLs, receive comprehensive test reports with pass/fail indicators and performance scores, meeting all P1 acceptance criteria from [spec.md](spec.md).

**Next Increment (P2)**: Add tasks T049-T059 for detailed diagnostics, screenshots, and recommendations.

**Future Increment (P3)**: Add tasks T060-T071 for test history, trend analysis, and report comparison.

---

## Notes

- **No TDD Required**: Per constitution check in [plan.md:67-70](plan.md), spec does not explicitly request tests, so no test tasks are generated
- **Browser Pool**: Initialized with 5 instances per [research.md:252-259](research.md) to handle 10 concurrent users
- **Screenshot Compression**: All screenshots compressed to WebP 80% quality per [research.md:260-268](research.md)
- **Performance Thresholds**: Defined in T031, sourced from [quickstart.md:341-347](quickstart.md)
- **Database Retention**: No automatic cleanup implemented in MVP (P4 future: 30-day retention policy)

---

**Generated by**: `/speckit.tasks` command
**Date**: 2025-11-27
**Specification**: [spec.md](./spec.md)
**Planning**: [plan.md](./plan.md)
